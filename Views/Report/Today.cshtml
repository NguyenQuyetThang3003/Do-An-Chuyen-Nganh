@{
    ViewData["Title"] = "B√°o c√°o v·∫≠n h√†nh h√¥m nay";
}

<div class="container mt-4">
    <h3 class="fw-bold text-danger mb-2">üì¶ B√°o c√°o v·∫≠n h√†nh h√¥m nay</h3>
    <p class="text-muted">üïí C·∫≠p nh·∫≠t l√∫c @ViewBag.LastUpdated</p>

    <div class="row g-3">
        <!-- KH√ÇU L·∫§Y -->
        <div class="col-md-4">
            <div class="card border-success border-2 shadow-sm">
                <div class="card-body">
                    <h5 class="text-success fw-bold">üì¨ Kh√¢u l·∫•y</h5>
                    <p>T·ªìn ƒë·∫ßu ng√†y: <b>@ViewBag.TotalBefore</b></p>
                    <p>T·ªìn hi·ªán t·∫°i: <b>@(ViewBag.TotalBefore + ViewBag.TotalToday)</b></p>
                    <hr />
                    <p>L·∫•y th√†nh c√¥ng: <b>@ViewBag.Done</b></p>
                    <p>H·ªßy l·∫•y: <b>@ViewBag.Cancelled</b></p>
                </div>
            </div>
        </div>

        <!-- KH√ÇU GIAO -->
        <div class="col-md-4">
            <div class="card border-primary border-2 shadow-sm">
                <div class="card-body">
                    <h5 class="text-primary fw-bold">üöö Kh√¢u giao</h5>
                    <p>T·ªïng ƒë∆°n giao h√¥m nay: <b>@ViewBag.TotalToday</b></p>
                    <p>ƒêang giao: <b>@ViewBag.Shipping</b></p>
                    <hr />
                    <p>Giao th√†nh c√¥ng: <b>@ViewBag.Done</b></p>
                    <p>H·ªßy giao: <b>@ViewBag.Cancelled</b></p>
                </div>
            </div>
        </div>

        <!-- KH√ÇU HO√ÄN -->
        <div class="col-md-4">
            <div class="card border-warning border-2 shadow-sm">
                <div class="card-body">
                    <h5 class="text-warning fw-bold">‚Ü©Ô∏è Kh√¢u ho√†n</h5>
                    <p>T·ªìn ho√†n ƒë·∫ßu ng√†y: <b>0</b></p>
                    <p>T·ªìn ho√†n hi·ªán t·∫°i: <b>0</b></p>
                    <hr />
                    <p>Ho√†n th√†nh c√¥ng: <b>0</b></p>
                    <p>H·ªßy ho√†n: <b>0</b></p>
                </div>
            </div>
        </div>
    </div>

    <hr class="my-4" />

    <!-- Bi·ªÉu ƒë·ªì Chart.js -->
    <div class="mt-4">
        <canvas id="statusChart" style="max-height: 350px;"></canvas>
    </div>

    <div class="form-check form-switch mt-4">
        <input class="form-check-input" type="checkbox" id="emailSwitch">
        <label class="form-check-label" for="emailSwitch">Nh·∫≠n email b√°o c√°o v·∫≠n h√†nh</label>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('statusChart').getContext('2d');
        const data = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(ViewBag.ChartData));

        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Ch·ªù x·ª≠ l√Ω', 'ƒêang giao', 'Ho√†n t·∫•t', 'ƒê√£ h·ªßy'],
                datasets: [{
                    label: 'ƒê∆°n h√†ng h√¥m nay',
                    data: data,
                    backgroundColor: [
                        '#17a2b8',
                        '#ffc107',
                        '#28a745',
                        '#dc3545'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'bottom' },
                    title: { display: true, text: 'T·ª∑ l·ªá tr·∫°ng th√°i ƒë∆°n h√†ng h√¥m nay' }
                }
            }
        });
    </script>
}

<style>
    .card {
        border-radius: 12px;
        transition: all 0.2s ease;
    }

    .card:hover {
        transform: scale(1.02);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
    }

    h3 {
        font-family: 'Segoe UI', sans-serif;
    }
</style>
